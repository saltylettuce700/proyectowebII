<div class="container">
  <div class="catalogo-container">
    <!-- üè† ENCABEZADO -->
    <div class="catalogo-header">
      <a href="/">Home</a> / <span>Cat√°logo</span>
    </div>

    <!-- üìå T√çTULO Y CANTIDAD DE PRODUCTOS -->
    <div class="catalogo-title">
      <h1>All</h1>
      <span>{{ productosFiltrados.length }} products</span>
    </div>

    <!-- Bot√≥n para agregar un nuevo producto -->
    <div class="catalogo-actions">
      <button class="add-btn" (click)="nuevoProducto()">‚ûï Agregar nuevo producto</button>
    </div>

    <!-- üì¶ LAYOUT PRINCIPAL (2 COLUMNAS) -->
    <div class="catalogo-content">

      <!-- üéöÔ∏è FILTROS MODERNOS -->
      <div class="filtros">
        <h3>En stock</h3>
        <label class="form-check">
          <input type="checkbox" [(ngModel)]="filtroSoloStock" (change)="onFilterChange()" />
          <span>Solo en stock</span>
        </label>

        <h3>Tipo de Producto</h3>
        <div class="checkbox-group">
          <label class="form-check" *ngFor="let tipo of tiposProductoDisponibles">
            <input 
              type="checkbox" 
              [(ngModel)]="selectedProductTypes[tipo.id_tipo]" 
              (change)="onFilterChange()" 
            />
            <span>{{ tipo.tipo }}</span>
          </label>
        </div>

        <h3>Marca</h3>
        <div class="checkbox-group">
          <label class="form-check" *ngFor="let marca of marcasDisponibles">
            <input 
              type="checkbox" 
              [(ngModel)]="selectedBrands[marca]" 
              (change)="onFilterChange()" 
            />
            <span>{{ marca }}</span>
          </label>
        </div>
      </div>


      <!-- üõí LISTADO DE PRODUCTOS -->
      <div class="productos">
        <div *ngFor="let producto of productosFiltrados" class="producto-card">
          <img [src]="producto.imagen" alt="{{ producto.nombre }}" />
          <p>{{ producto.nombre }}</p>
          <span>${{ producto.precio }}</span>
          <br>
          <br>
          <button class="edit-btn" (click)="openModal(producto)">Edit</button>
          <button class="delete-btn" (click)="eliminarProducto(producto.id)">üóëÔ∏è</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- üßæ MODAL -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h2>Editar Producto</h2>
    <form (ngSubmit)="guardarCambios()" #formProducto="ngForm">
      <div class="form-group">
        <label>Tipo de producto</label>
        <input type="number" name="tipoProducto" [(ngModel)]="producto.tipoProducto" required />

      </div>
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" name="nombre" [(ngModel)]="producto.nombre" required />
      </div>
      <div class="form-group">
        <label>Descripci√≥n</label>
        <textarea name="descripcion" [(ngModel)]="producto.descripcion" rows="3"></textarea>
      </div>
      <div class="form-group">
        <label>Precio</label>
        <input type="number" name="precio" [(ngModel)]="producto.precio" required />
      </div>
      <div class="form-group">
        <label>URL de imagen</label>
        <input type="text" name="imagen" [(ngModel)]="producto.imagen" />
      </div>
      <div class="form-group">
        <label>Marca</label>
        <input type="text" name="marca" [(ngModel)]="producto.marca" />
      </div>
      <div class="form-group">
        <label>Cantidad</label>
        <input type="number" name="cantidad" [(ngModel)]="producto.cantidad" required />
      </div>
      <div class="form-actions">
        <button type="button" class="btn-cancel" (click)="closeModal()">Cancelar</button>
        <button type="submit" class="btn-save">Guardar</button>
      </div>
    </form>
  </div>
</div>

<!-- ‚úÖ MENSAJE DE CONFIRMACI√ìN -->
<div class="toast" *ngIf="toastVisible">
  {{ toastMessage }}
</div>
